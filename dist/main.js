(()=>{"use strict";var t={761:(t,e,r)=>{t.exports=r.p+"83cd83a4d8303d06e54b.png"}},e={};function r(i){var n=e[i];if(void 0!==n)return n.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,r),a.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),(()=>{var t="undefined"!=typeof Float32Array?Float32Array:Array;function e(){var e=new t(16);return t!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});const i=function(){function t(t,r,i){this.locations={attributes:null,uniforms:null},this.gl=t,this.shader=this.createProgram(r,i),this.locations={attributes:{points:this.gl.getAttribLocation(this.shader,"a_point"),coords:this.gl.getAttribLocation(this.shader,"a_texCoord"),position:this.gl.getAttribLocation(this.shader,"a_position"),rect:this.gl.getAttribLocation(this.shader,"a_uvRect")},uniforms:{matrix:this.gl.getUniformLocation(this.shader,"u_viewMatrix"),sampler:this.gl.getUniformLocation(this.shader,"uSampler")}},this.gl.enableVertexAttribArray(this.locations.attributes.points),this.gl.enableVertexAttribArray(this.locations.attributes.coords),this.gl.enableVertexAttribArray(this.locations.attributes.position),this.gl.enableVertexAttribArray(this.locations.attributes.rect),this.gl.useProgram(this.shader);var n=e();this.gl.uniformMatrix4fv(this.locations.uniforms.matrix,!1,n),this.setAttribute("points",this.createStaticBuffer([0,100,100,0,0,0,0,100,100,100,100,0]),2,this.gl.FLOAT),this.setAttribute("coords",this.createStaticBuffer([0,0,1,1,0,1,0,0,1,0,1,1]),2,this.gl.FLOAT)}return t.prototype.createStaticBuffer=function(t){var e=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(t),this.gl.STATIC_DRAW),e},t.prototype.setTexture=function(t){this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(this.locations.uniforms.sampler,0)},t.prototype.setAttribute=function(t,e,r,i,n){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.vertexAttribPointer(this.locations.attributes[t],r,i,!1,0,0),n&&this.gl.getExtension("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(this.locations.attributes[t],n)},t.prototype.setUniform=function(t,e){},t.prototype.createProgram=function(t,e){var r=this.gl,i=r.createProgram();if(r.attachShader(i,this.createShader(r.VERTEX_SHADER,t)),r.attachShader(i,this.createShader(r.FRAGMENT_SHADER,e)),r.linkProgram(i),r.getProgramParameter(i,r.LINK_STATUS))return i;console.log(r.getProgramInfoLog(i)),r.deleteProgram(i)},t.prototype.createShader=function(t,e){var r=this.gl,i=r.createShader(t);if(r.shaderSource(i,e),r.compileShader(i),r.getShaderParameter(i,r.COMPILE_STATUS))return i;console.log(r.getShaderInfoLog(i)),r.deleteShader(i)},t}();var n=2e5,a=function(t,e,r){if(r||2===arguments.length)for(var i,n=0,a=e.length;n<a;n++)!i&&n in e||(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}([],new Array(n),!0).map((function(t){return[1e3*Math.random(),1e3*Math.random()]})).flat(),o=new Array(n).fill([0,0,.5,1]).flat();const s=function(){function t(t){var r=this,n=t.canvas,a=t.width,o=t.height,s=t.className;this.spritePositionBuffer=[],this.spriteRectBuffer=[],this.buffers={DEFAULT:null},this.canvas=n||document.createElement("canvas"),this.canvas.width=a||800,this.canvas.height=o||600,s&&(this.canvas.className=s),this.gl=this.canvas.getContext("webgl",{premultipliedAlpha:!1}),new ResizeObserver((function(t){var i=t[0];r.canvas.width=i.contentRect.width,r.canvas.height=i.contentRect.height;var n,a,o,s,h,l,c=e();n=c,s=1/(0-(a=r.gl.canvas.width)),h=1/((o=r.gl.canvas.height)-0),l=1/(0-100),n[0]=-2*s,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*h,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*l,n[11]=0,n[12]=(0+a)*s,n[13]=(0+o)*h,n[14]=100*l,n[15]=1,r.gl.uniformMatrix4fv(r.material.locations.uniforms.matrix,!1,c),r.gl.viewport(0,0,r.canvas.width,r.canvas.height)})).observe(this.canvas),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!0),this.gl.clearColor(0,0,0,0),this.material=new i(this.gl,"// an attribute will receive data from a buffer\r\nattribute vec4 a_point;\r\nattribute vec2 a_texCoord;\r\nattribute vec2 a_position;\r\nattribute vec4 a_uvRect;\r\n\r\nuniform mat4 u_viewMatrix;\r\n\r\nvarying highp vec2 v_texCoord;\r\nvarying highp vec2 v_position;\r\n\r\n// all shaders have a main function\r\nvoid main() {\r\n  // gl_Position is a special variable a vertex shader\r\n  // is responsible for setting\r\n\r\n  mat4 aMat4 = mat4(1.0, 0.0, 0.0, 0.0,  // 1. column\r\n                    0.0, 1.0, 0.0, 0.0,  // 2. column\r\n                    0.0, 0.0, 1.0, 0.0,  // 3. column\r\n                    0.0, 0.0, 0.0, 1.0); // 4. column\r\n\r\n  // gl_Position = a_point;\r\n  // gl_Position = aMat4 * a_point;\r\n  // gl_Position = u_viewMatrix * floor(a_point);\r\n  gl_Position = u_viewMatrix * (a_point + vec4(a_position, 0, 0));\r\n\r\n  v_texCoord = a_texCoord * vec2(a_uvRect.zw) + vec2(a_uvRect.xy);\r\n}","// fragment shaders don't have a default precision so we need\r\n// to pick one. mediump is a good default\r\nprecision mediump float;\r\n\r\nvarying highp vec2 v_texCoord;\r\n// varying highp vec2 v_position;\r\nuniform sampler2D uSampler;\r\n\r\nvoid main() {\r\n  // gl_FragColor is a special variable a fragment shader\r\n  // is responsible for setting\r\n\r\n  // gl_FragColor = vec4(v_texCoord, 0, 1); // return uv color\r\n\r\n\r\n  vec4 texColor = texture2D(uSampler, v_texCoord);\r\n  \r\n  if (texColor.a < 0.1) discard;\r\n\r\n  gl_FragColor = texColor;\r\n}")}return t.prototype.setMaterial=function(){},t.prototype.drawSprite=function(t){this.batchSprites([t]),this.draw(this.buffers.DEFAULT)},t.prototype.drawSprites=function(t){t.length&&(this.batchSprites(t),this.draw(this.buffers.DEFAULT))},t.prototype.draw=function(t){if(void 0===t&&(t=this.buffers.DEFAULT),t){var e=this.gl.getExtension("ANGLE_instanced_arrays");this.material.setTexture(t.texture.glTexture),this.material.setAttribute("position",t.posBuffer,2,this.gl.FLOAT,1),this.material.setAttribute("rect",t.rectBuffer,4,this.gl.FLOAT,1),e.drawArraysInstancedANGLE(this.gl.TRIANGLES,0,6,t.bufferLength)}},t.prototype.batchSprites=function(t,e){void 0===e&&(e="DEFAULT"),this.createDynamicBuffers(e,a,t[0].texture,o)},t.prototype.createStaticBuffer=function(t){var e=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(t),this.gl.STATIC_DRAW),e},t.prototype.createDynamicBuffers=function(t,e,r,i){this.buffers[t]||(this.buffers[t]={posBuffer:this.gl.createBuffer(),rectBuffer:this.gl.createBuffer(),texture:null,bufferLength:0}),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffers[t].posBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(e),this.gl.DYNAMIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffers[t].rectBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(i),this.gl.DYNAMIC_DRAW),this.buffers[t].texture=r,this.buffers[t].bufferLength=e.length/2},t}(),h=function(){function t(t,e,r,i,n,a,o){void 0===n&&(n=0),this.x=0,this.y=0,this.width=0,this.height=0,this.vel={x:0,y:0},this.depth=0,this.gravity=.1,this.x=t,this.y=e,this.width=r,this.height=i,this.vel={x:0,y:0},this.depth=n,this.texture=a,this.atlasRect=o}return t.prototype.getPosition=function(){return{x:this.x,y:this.y}},t.prototype.setPosition=function(t,e){this.x=t,this.y=e},t.prototype.getUvs=function(){},t.prototype.update=function(t){},t}();var l=function(){function t(t,e){this.resources=[],this.textures={},this.gl=t,this.onCompleteHandler=e}return t.prototype.add=function(t,e){this.resources.push([t,e])},t.prototype.load=function(){var t=this,e=0;this.resources.forEach((function(r){var i=r[0],n=r[1],a=new Image;a.onload=function(r){return function(r,i){console.log("resource loaded");var n=t.gl,a=new c(n,r);t.textures[i]=a,e+=1,console.log(e,t.resources.length),e==t.resources.length&&t.onCompleteHandler(t.textures)}(r.target,n)},a.src=i}))},t}(),c=function(t,e){this.glTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.glTexture);var r=t.RGBA,i=t.RGBA,n=t.UNSIGNED_BYTE;function a(t){return 0==(t&t-1)}t.bindTexture(t.TEXTURE_2D,this.glTexture),t.texImage2D(t.TEXTURE_2D,0,r,i,n,e),a(e.width)&&a(e.height)?t.generateMipmap(t.TEXTURE_2D):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)};const u=new s({width:640,height:480,className:"CYC3DFwTrY3A_66qmmqA"});var f,g=(f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});const p=function(t){function e(e,r,i,n,a,o,s){void 0===a&&(a=0),void 0===s&&(s=null);var h=t.call(this,e,r,i,n,a,o,s)||this;return h.gravity=.1,h}return g(e,t),e.prototype.update=function(t){var e=this.getPosition(),r=e.x,i=e.y;this.vel.y+=this.gravity*t/20,r+=this.vel.x*t/20,i+=this.vel.y*t/20;var n=u.canvas.width-this.width,a=u.canvas.height-this.height;r<0&&(r=0,this.vel.x*=-1),r>n&&(r=n,this.vel.x*=-1),i<0&&(i=0,this.vel.y*=-1),i>a&&(i=a-(i-a),this.vel.y=14*-Math.random()),this.setPosition(r,i)},e}(h);var v=r(761),d={texture:v,width:200,height:100,rects:[[0,0,.5,1],[.5,0,.5,1]]},m=new l(u.gl,(function(t){for(var e=[],r=0;r<2e5;r++)a(1e3*Math.random(),1e3*Math.random());var i=!1,n={x:0,y:0};function a(r,i){void 0===r&&(r=0),void 0===i&&(i=0),e.push(new p(r-50,i-50,100,100,0,t.myAtlas,0===Math.floor(2*Math.random())?d.rects[0]:d.rects[1]));var n=Math.random()*Math.PI*2,a=2*Math.random()+4;e[e.length-1].vel={x:Math.sin(n)*a,y:Math.cos(n)*a}}u.canvas.addEventListener("mousedown",(function(t){i=!0,n={x:t.clientX,y:t.clientY}})),u.canvas.addEventListener("mouseup",(function(){i=!1})),u.canvas.addEventListener("mousemove",(function(t){n={x:t.clientX,y:t.clientY}})),u.batchSprites(e,"TEST"),window.requestAnimationFrame((function t(){if(i)for(var r=0;r<100;r++)a(n.x,n.y);for(r=0;r<e.length;r++){var o=e[r];o.vel.y+=10*o.gravity/20,o.x+=10*o.vel.x/20,o.y+=10*o.vel.y/20;var s=u.canvas.width-o.width,h=u.canvas.height-o.height;o.x<0&&(o.x=0,o.vel.x*=-1),o.x>s&&(o.x=s,o.vel.x*=-1),o.y<0&&(o.y=0,o.vel.y*=-1),o.y>h&&(o.y=h-(o.y-h),o.vel.y=14*-Math.random())}u.drawSprites(e),window.requestAnimationFrame(t)}))}));m.add(v,"myAtlas"),m.load(),document.getElementById("root").appendChild(u.canvas)})()})();